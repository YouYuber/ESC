<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Google</title>
	<style>
		/*ã“ã“ã‹ã‚‰ã¯ã„ã˜ã‚‰ãªã„ã§ãã ã•ã„*/
		header {
			display: flex;
		}

		:root {
			--bg-color: #0e1014;
			--text-color: #e7eaee;
			--panel-bg: #12161c;
			--border-color: #2a3038;
		}

		body {
			margin: 0;
			padding: 24px;
			background: var(--bg-color);
			color: var(--text-color);
			font-family: sans-serif;
		}

		body.light-mode {
			--bg-color: #f5f5f5;
			--text-color: #222;
			--panel-bg: #fff;
			--border-color: #ccc;
		}

		.panel {
			border-radius: 14px;
			padding-top: 10px;
			padding-bottom: 10px;
			padding: 14px;
			background: var(--panel-bg);
			border: 1px solid var(--border-color);
		}

		.app {
			max-width: 960px;
			margin: 0 auto;
			display: grid;
			gap: 14px;
		}

		.controls {
			display: grid;
			gap: 10px;
			grid-template-columns: 1fr auto auto;
		}

		.input {
			display: flex;
			gap: 10px;
			align-items: center;
			background: var(--bg-color);
			border: 1px solid var(--border-color);
			border-radius: 12px;
			padding: 10px 12px;
		}

		.input input {
			width: 100%;
			background: transparent;
			border: none;
			outline: none;
			color: #e7eaee;
			font-size: 14px;
		}

		.btn {
			border: 1px solid var(--border-color);
			color: var(--text-color);
			background: var(--bg-color);
			padding: 6px 10px;
			border-radius: 8px;
			font-size: 12px;
			cursor: pointer;
		}

		.btn.primary {
			background: linear-gradient(180deg, #2a6bff, #3ea6ff);
			border-color: #2a6bff;
			color: #09111a;
			font-weight: 600;
		}

		.btn:hover {
			filter: brightness(1.05);
		}

		.player {
			aspect-ratio: 16/9;
			width: 100%;
			background: #0b0e12;
			border: 1px solid #2a3038;
			border-radius: 14px;
			overflow: hidden;
		}

		iframe {
			width: 100%;
			height: 100%;
			border: 0;
		}

		#historyList li {
			margin: 6px 0;
			display: flex;
			justify-content: space-between;
			align-items: center;
			cursor: pointer;
		}

		#historyList a {
			color: #7cf;
			text-decoration: none;
			font-size: 14px;
		}

		#historyList a:hover {
			text-decoration: underline;
		}

		.footer {
			color: #9aa3ac;
			font-size: 12px;
			text-align: center;
			margin-top: 10px;
		}

		.button {
			margin-top: 33px;
			margin-left: 20px;
			font-size: 14px;
			cursor: pointer;
			color: #7cf;
			background-color: var(--bg-color);
			border-style: none
		}

		.hidden,
		.hidden2 {
			display: none
		}

		#mask,
		#mask2 {
			background: rgba(0, 0, 0, .7);
			position: fixed;
			top: 0;
			bottom: 0;
			right: 0;
			left: 0;
			z-index: 1
		}

		#modal,
		#modal2 {
			max-height: 100vh;
			min-height: 100vh;
			overflow-y: auto;
			background: #0e1014;
			width: 80%;
			padding: 24px;
			border-radius: 4px;
			color: black;
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			margin: 0 auto;
			z-index: 2
		}

		/* bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å›ºå®šç”¨ */
		.modal-open {
			overflow: hidden;
		}

		.h1 {
			color: #fff;
		}

		.h1-1 {
			color: white;
			padding-top: 10px;
		}

		li {
			font-size: 13px;
			color: #fff;
		}

		p {
			color: white;
		}

		#historyList li {
			background: #1a1d24;
			border-radius: 8px;
			padding: 8px;
			margin: 6px 0;
			display: flex;
			align-items: center;
			justify-content: space-between;
			/* â† å·¦ã®æ–‡å­—ã¨å³ã®å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’åˆ†ã‘ã‚‹ */
			transition: background 0.2s;
		}

		#historyList span {
			text-align: left;
			/* â† æ–‡å­—ã‚’å·¦å¯„ã› */
			flex: 1;
			/* â† å·¦å´ã«åºƒãŒã‚‹ã‚ˆã†ã«ã™ã‚‹ */
		}

		#historyList li:hover {
			background: #2a3038;
		}

		#historyList img {
			width: 80px;
			border-radius: 6px;
			margin-right: 10px;
		}

		.btn {
			font-size: 15px;
		}
	</style>
</head>

<body>
	<header>
		<h1>YouTubeãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼</h1>
		<div class="btn-container">
			<button id="btn3" class="button" onclick="openModal()">ä½¿ã„æ–¹</button>
		</div>
		<div id="mask" class="hidden" onclick="closeModal()"></div>
		<section id="modal" class="hidden">
			<h1 class="h1">ä½¿ã„æ–¹</h1>
			<p>1. æ¤œç´¢æ¬„ã«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã€Œæ¤œç´¢ã—ã¦å†ç”Ÿã€ã‚’æŠ¼ã™ã‹ã€YouTubeã®URLåˆã¯IDã‚’è²¼ã‚Šä»˜ã‘ã€å‹•ç”»ã‚’ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«èª­ã¿è¾¼ã¾ã›ã¦å†ç”Ÿã—ã¾ã™ã€‚</p>
			<p>2. å…¬å¼ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãŸã‚ã€å­—å¹•ã‚„ç”»è³ªå¤‰æ›´ãªã©ã‚‚å¯èƒ½ã§ã™ã€‚</p>
			<p>3. å†ç”Ÿå±¥æ­´ã‹ã‚‰å‹•ç”»ã‚’è¦‹ã‚‹å ´åˆã¯ã€ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€è²¼ã‚Šä»˜ã‘ã¦ã”è¦–è´ãã ã•ã„ã€‚</p>
			<h1 class="h1-1">æ³¨æ„äº‹é …</h1>
			<p>ãƒ»æœ¬ãƒšãƒ¼ã‚¸ã¯YouTubeã®å…¬å¼ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€ã€ŒYouTubeã€åŠã³ã€ŒGoogleã€åˆã¯ãã‚Œã«æº–ãšã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ä¿‚ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚é–‰é–ã‚„ãƒšãƒ¼ã‚¸ã®å‰Šé™¤ã«é–¢ã—ã¾ã—ã¦ã¯ã”äº†æ‰¿ãã ã•ã„ã€‚</p>
			<p>ãƒ»ç¾æ™‚ç‚¹ã§ã¯æ¤œç´¢æ¬„ã«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã‚‚ã€æ¤œç´¢æ©Ÿèƒ½ã¯ã”åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚æã‚Œå…¥ã‚Šã¾ã™ãŒã€Webç­‰ã§URLåˆã¯IDã‚’æ¤œç´¢ã—ãŸã†ãˆã§æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚</p>
			<p>ãƒ»æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã¯ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã¯ç¨¼åƒã—ã¾ã›ã‚“ã€‚å¿…ãšã€ã‚µã‚¤ãƒˆã®ä¿å­˜ã¯ã›ãšã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚</p>
			<h1 class="h1-1">ã‚µãƒ¼ãƒ“ã‚¹ã®ç‰¹å¾´</h1>
			<p>1. æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ã¨å±¥æ­´ã‚’æ®‹ã•ãšYouTubeã‚’é–²è¦§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚(YouTubeå´ã®å±¥æ­´æ©Ÿèƒ½ã‚’OFFã«ã—ãŸå ´åˆã®ã¿)</p>
			<p>2. æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«ã¯å±¥æ­´æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã®ã§ã€å†åº¦è¦‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p>
		</section>

		<div class="btn-container">
			<button id="btn4" class="button" onclick="openModal()">é–²è¦§å±¥æ­´</button>
		</div>
		<div id="mask2" class="hidden2" onclick="closeModal()"></div>
		<section id="modal2" class="hidden2">
			<section class="panel">
				<h1 class="h1">é–²è¦§å±¥æ­´</h1>
				<!-- â–¼ å±¥æ­´æ¤œç´¢æ¬„ã‚’è¿½åŠ  -->
				<input id="historySearch" type="text" placeholder="å±¥æ­´æ¤œç´¢ (ã‚¿ã‚¤ãƒˆãƒ«/ä½œè€…)"
               style="width:100%;padding:8px;margin-bottom:10px;">
				<ul id="historyList" style="list-style:none;padding:0;margin:0;"></ul>
				<button class="btn" id="clearHistoryBtn">å±¥æ­´ã‚¯ãƒªã‚¢</button>
			</section>
		</section>
		<div class="btn-container gasu">
			<button id="toggleThemeBtn" class="button buttons">â˜€ï¸</button>
		</div>
	</header>
	<main class="app">
		<section class="panel">
			<div class="controls">
				<label class="input">ğŸ”
          <input id="query" type="text" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼ˆYouTubeåŸ‹ã‚è¾¼ã¿ï¼‰">
        </label>
				<button class="btn primary" id="searchBtn">æ¤œç´¢ã—ã¦å†ç”Ÿ</button>
				<button class="btn" id="clearBtn">ã‚¯ãƒªã‚¢</button>
			</div>
			<div class="row" style="margin-top:10px">
				<label class="input">ğŸ”—
          <input id="urlInput" type="text" placeholder="YouTubeã®URLã¾ãŸã¯å‹•ç”»IDã‚’è²¼ã‚Šä»˜ã‘">
        </label>
				<button class="btn" id="loadUrlBtn">URLã‚’èª­ã¿è¾¼ã¿</button>
			</div>
			<div class="player" style="margin-top:12px">
				<iframe id="player"
					src="https://www.youtube.com/embed?listType=search&list=%E3%83%88%E3%83%AC%E3%83%B3%E3%83%89"
					allowfullscreen>
				</iframe>
			</div>
		</section>
		<p class="footer">Â© 2025 â€” ã‚¤ãƒ³ãƒ†ãƒ«æœ€é«˜ï½©ï½©</p>
	</main>
	<script>
		const btn3 = document.getElementById('btn3');
		const mask = document.getElementById('mask');
		const modal = document.getElementById('modal');
		
		btn3.addEventListener('click', () => {
		mask.classList.remove('hidden');
		modal.classList.remove('hidden');
		});
		
		mask.addEventListener('click', () => {
		mask.classList.add('hidden');
		modal.classList.add('hidden');
		document.body.classList.remove('modal-open');
		});
	</script>
	<script>
		const btn4 = document.getElementById('btn4');
	const mask2 = document.getElementById('mask2');
	const modal2 = document.getElementById('modal2');
	
	btn4.addEventListener('click', () => {
	mask2.classList.remove('hidden2');
	modal2.classList.remove('hidden2');
	});
	mask2.addEventListener('click', () => {
	mask2.classList.add('hidden2');
	modal2.classList.add('hidden2');
	document.body.classList.remove('modal-open');
	});
	</script>
	<script>
		function openModal() {
document.body.classList.add('modal-open');
document.querySelector('.modal').style.display = 'block';
}
	</script>
	<script>
		const qs = sel => document.querySelector(sel);
    const player = qs('#player');
    const queryInput = qs('#query');
    const urlInput = qs('#urlInput');
    let history = JSON.parse(localStorage.getItem('ytHistory') || '[]');

	  function ellipsizeText(element, maxWidth) {
	  const text = element.textContent;
	  const style = window.getComputedStyle(element);
	  const canvas = document.createElement("canvas");
	  const ctx = canvas.getContext("2d");
	  ctx.font = `${style.fontWeight} ${style.fontSize} ${style.fontFamily}`;
	  if (ctx.measureText(text).width <= maxWidth) return; let truncated=text; while (ctx.measureText(truncated + "â€¦" ).width>
		maxWidth && truncated.length > 0) {
		  truncated = truncated.slice(0, -1);
		}
		  element.textContent = truncated + "â€¦";
		}

    // â–¼ æ¤œç´¢æ¬„ã®ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ 
    const historySearch = qs('#historySearch');
    historySearch.addEventListener('input', () => {
      updateHistoryUI(historySearch.value.trim().toLowerCase());
    });

    // å±¥æ­´UIæ›´æ–°ï¼ˆæ—¥ä»˜ã”ã¨ï¼‹ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤ºï¼‹æ¤œç´¢å¯¾å¿œï¼‰
    function updateHistoryUI(filter = "") {
      const list = qs('#historyList');
      list.innerHTML = '';

      const today = new Date().toISOString().split('T')[0];
      const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
      const weekAgo = new Date(Date.now() - 7 * 86400000).toISOString().split('T')[0];

      const grouped = { "ä»Šæ—¥": [], "æ˜¨æ—¥": [], "éå»1é€±é–“": [], "ãã‚Œä»¥å‰": [] };

      history.forEach((item, idx) => {
        const text = (item.title + " " + item.author).toLowerCase();
        if (filter && !text.includes(filter)) return; // â†æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿

        if (item.date === today) grouped["ä»Šæ—¥"].push({ ...item, idx });
        else if (item.date === yesterday) grouped["æ˜¨æ—¥"].push({ ...item, idx });
        else if (item.date >= weekAgo) grouped["éå»1é€±é–“"].push({ ...item, idx });
        else grouped["ãã‚Œä»¥å‰"].push({ ...item, idx });
      });

      Object.keys(grouped).forEach(section => {
        if (grouped[section].length === 0) return;
        const header = document.createElement('h3');
        header.textContent = section;
        header.style.color = "#7cf";
        list.appendChild(header);

        const container = document.createElement('div');
        container.style.marginLeft = "10px";
        list.appendChild(container);

        const liElements = [];
        grouped[section].forEach((item, i) => {
          // æ—¢å­˜ã® li ä½œæˆå‡¦ç†ã‚’ãã®ã¾ã¾åˆ©ç”¨
          const li = document.createElement('li');
          li.style.alignItems = "center";
          li.style.justifyContent = "space-between";

          const img = document.createElement('img');
          const videoId = item.url.split('v=')[1];
          img.src = `https://img.youtube.com/vi/${videoId}/default.jpg`;
          img.style.width = "80px";
          img.style.marginRight = "10px";
          li.appendChild(img);

          const span = document.createElement('span');
          span.textContent = `${item.title} â€” @${item.author}`;
          span.style.flex = "1";
          span.style.textAlign = "left";
          li.appendChild(span);

          const delBtn = document.createElement('button');
          delBtn.textContent = "å‰Šé™¤";
          delBtn.className = "btn";
          delBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            history = history.filter(h => h.url !== item.url);
            localStorage.setItem('ytHistory', JSON.stringify(history));
            updateHistoryUI(filter);
          });
          li.appendChild(delBtn);

          li.addEventListener('click', () => {
            navigator.clipboard.writeText(item.url).then(() => {
              alert("ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ: " + item.url);
            });
          });

          container.appendChild(li);
          liElements.push(li);
        });
      });
    }
	// å±¥æ­´è¿½åŠ ï¼ˆæ—¥ä»˜ã‚‚ä¿å­˜ï¼‰
	async function addToHistory(id) {
	const info = await fetchOEmbedInfo(id);
	const now = new Date();
	info.date = now.toISOString().split('T')[0]; // YYYY-MM-DDå½¢å¼
	history.unshift(info);
	if (history.length > 9999) history = history.slice(0,9999);
	localStorage.setItem('ytHistory', JSON.stringify(history));
	updateHistoryUI();
	}
	// oEmbedã§å‹•ç”»æƒ…å ±å–å¾—
	async function fetchOEmbedInfo(videoId) {
	const url = `https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${videoId}&format=json`;
	try {
	const res = await fetch(url);
	if (!res.ok) throw new Error("oEmbedå–å¾—å¤±æ•—");
	const data = await res.json();
	return {
	title: data.title,
	author: data.author_name,
	url: `https://www.youtube.com/watch?v=${videoId}`
	};
	} catch {
	return { title: videoId, author: "", url: `https://www.youtube.com/watch?v=${videoId}` };
	}
	}
	// å±¥æ­´è¿½åŠ 
	async function addToHistory(id) {
	const info = await fetchOEmbedInfo(id);
	const now = new Date();
	info.date = now.toISOString().split('T')[0]; // YYYY-MM-DDå½¢å¼
	history.unshift(info);
	if (history.length > 9999) history = history.slice(0,9999);
	localStorage.setItem('ytHistory', JSON.stringify(history));
	updateHistoryUI();
	}
	// æ¤œç´¢å†ç”Ÿ
	function setPlayerToSearch(q) {
	const safe = encodeURIComponent(q.trim());
	if (!safe) return;
	player.src = `https://www.youtube.com/embed?listType=search&list=${safe}`;
	}
	// URL/IDã‹ã‚‰å‹•ç”»IDæŠ½å‡º
	function extractVideoId(input) {
	const s = input.trim();
	if (!s) return null;
	if (/^[a-zA-Z0-9_-]{11}$/.test(s)) return s;
	try {
	const u = new URL(s);
	if (u.hostname.includes('youtu.be')) {
	const id = u.pathname.split('/').filter(Boolean)[0];
	if (id && /^[a-zA-Z0-9_-]{11}$/.test(id)) return id;
	}
	if (u.searchParams.has('v')) {
	const id = u.searchParams.get('v');
	if (id && /^[a-zA-Z0-9_-]{11}$/.test(id)) return id;
	}
	if (u.pathname.includes('/embed/')) {
	const id = u.pathname.split('/').pop();
	if (id && /^[a-zA-Z0-9_-]{11}$/.test(id)) return id;
	}
	return null;
	} catch { return null; }
	}
	// å‹•ç”»å†ç”Ÿ
	async function setPlayerToVideo(id) {
	player.src = `https://www.youtube.com/embed/${id}?modestbranding=1`;
	await addToHistory(id);
	}
	// ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
	qs('#searchBtn').addEventListener('click', () => setPlayerToSearch(queryInput.value));
	qs('#clearBtn').addEventListener('click', () => {
	queryInput.value = '';
	urlInput.value = '';
	player.src = 'https://www.youtube.com/embed?listType=search&list=%E3%83%88%E3%83%AC%E3%83%B3%E3%83%89';
	});
	qs('#loadUrlBtn').addEventListener('click', () => {
	const id = extractVideoId(urlInput.value);
	if (!id) { alert('æœ‰åŠ¹ãªYouTubeã®URLã¾ãŸã¯å‹•ç”»IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'); return; }
	setPlayerToVideo(id);
	});
	queryInput.addEventListener('keydown', e => { if (e.key === 'Enter') setPlayerToSearch(queryInput.value); });
	urlInput.addEventListener('keydown', e => { if (e.key === 'Enter') qs('#loadUrlBtn').click(); });
	qs('#clearHistoryBtn').addEventListener('click', () => {
	history = [];
	localStorage.removeItem('ytHistory');
	updateHistoryUI();
	});
	// åˆæœŸåŒ–
	updateHistoryUI();
	</script>
	<script>
		const toggleBtn = document.getElementById('toggleThemeBtn');
	const body = document.body;
	
	toggleBtn.addEventListener('click', () => {
	body.classList.toggle('light-mode');
	const isLight = body.classList.contains('light-mode');
	toggleBtn.textContent = isLight ? 'ğŸŒ™' : 'â˜€ï¸';
	localStorage.setItem('theme', isLight ? 'light' : 'dark');
	});
	</script>
</body>

</html>
